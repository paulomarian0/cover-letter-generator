<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrair Texto de PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>
    <h1>Extrair Texto de um Arquivo PDF</h1>
    
    <input type="file" id="pdfFile" accept="application/pdf" />
    <h3>Conteúdo Extraído:</h3>
    <pre id="output"></pre>

    <script>
        document.getElementById('pdfFile').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const typedArray = new Uint8Array(e.target.result);

                    // Carregar o documento PDF
                    pdfjsLib.getDocument(typedArray).promise.then(function(pdf) {
                        let textContent = '';
                        const totalPages = pdf.numPages;

                        // Extrair o texto de cada página do PDF
                        const extractTextFromPage = (pageNum) => {
                            pdf.getPage(pageNum).then(function(page) {
                                page.getTextContent().then(function(text) {
                                    text.items.forEach(item => {
                                        textContent += item.str + '\n ';
                                    });

                                    // Se não for a última página, continuar extraindo da próxima
                                    if (pageNum < totalPages) {
                                        extractTextFromPage(pageNum + 1);
                                    } else {
                                        // Exibir o conteúdo extraído no <pre>
                                        document.getElementById('output').textContent = textContent;
                                    }
                                });
                            });
                        };

                        // Começar a extração pela primeira página
                        extractTextFromPage(1);
                    });
                };
                reader.readAsArrayBuffer(file);
            } else {
                alert('Por favor, selecione um arquivo PDF.');
            }
        });
    </script>
</body>
</html>
